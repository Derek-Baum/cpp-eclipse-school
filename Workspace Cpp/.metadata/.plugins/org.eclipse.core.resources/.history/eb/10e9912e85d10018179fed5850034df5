/*
 * LLHuff.cpp
 *
 *  Created on: Oct 16, 2018
 *      Author: Derek Baum
 */
#include <iostream>
#include "LLHuff.hpp"

using namespace std;

LLHuff::LLHuff(string f){
	file = f;
	root = NULL;
	size = 0;
	pq = NULL;
	ascii = NULL;
}
LLHuff::~LLHuff(){
	delete root;
	delete pq;
	delete ascii;
}
void LLHuff::MakeHuff(){
	while(pq->size != 1){
		LLNode *tmp = pq->remFirst();
		LLNode *tmp2 = pq->remFirst();
		LLNode *parent = new LLNode ('*',"-1",tmp->frequency + tmp2->frequency);
		parent->left = tmp;
		parent->right = tmp2;
		pq->insertInOrder(parent);
	}
	root = pq->first;
}
void LLHuff::FindCode(LLNode *root,string path){

}
void LLHuff::ReadFile(){
	ifstream infile(file.c_str(),ios::in);
	char ch;
	while(infile.get(ch)){
		pq->insertUnique(ch);
	}
	infile.close();
}
void LLHuff::compressFile(){

}
void ReadAscii(){
	cout << file << endl;
	ifstream infile("asciitable.txt",ios::in); // open file
	char ch;
	string asciicode;
	if (!infile.is_open()) {
	return;
	}
	infile >> asciicode;
	pq->addFirst(' ',asciicode);
	infile >> asciicode;
	while (infile>>ch) { // loop getting single characters
	cout << ch;
	infile>>asciicode; // gets entire word (code)
	cout << asciicode << endl;
	pq->addAtFirst(ch,asciicode);
	}
	cout << endl;
	infile.close();
	/////////////////////////////////////
	ifstream infile2(file.c_str(),ios::in); // open file for reading
	ofstream outfile("asciivsn.txt",ios::out);
	char k;
	string comp;
	while (infile2.get(k)) { // loop getting single characters
	cout << k;
	comp = pq->findCode(k);
	if (comp == "") {
	cout << "ERROR WITH " << k << endl;
	}
	else {
	cout << k << ":" << comp << endl;
	outfile << comp << " ";
	}
	}
	cout << endl;
	infile2.close();
	outfile.close();

}
